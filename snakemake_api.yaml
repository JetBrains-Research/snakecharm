annotationsFormatVersion: 1

# Default Language Level used for all projects:
defaultVersion: "7.32.4"

# supported types of sections in each version:
# * 'introduced' - API was introduced
# * 'override' - API was changed, need to set all required fields, it is not incremental update to prev. version
# * 'deprecated' - Deprecate API and optionally provide Hint, how to fix it using `advice:`
# * 'removed' - API was finally removed

# 'type' specifies type of element (or its context). Supported values:
#    * function - python functions (deprecations/removals only supported)
#    * top-level - directives on file top-level, e.g. subworkflow, rule, use, wildcard_constraints, ..
#    * rule-like - shortcut for a set of rules for directives: rule, use, checkpoint
#    * rule - snakemake rule subsection directives
#    * use - snakemake use subsection directives
#    * checkpoint - snakemake checkpoint subsection directives
#    * module - snakemake module subsection directives

# default values in `introduced` / `override`:
#    * section: True
#    * multiple_args_allowed: True
#    * keyword_args_allowed: True
# =========================================
changelog:
  # ---------------------------------------
  - version: "8.0.0"
    removed:
      - name: "dynamic"
        type: "function"
        advice: "use checkpoints instead."

      - name: "version"
        type: "rule-like"
        advice: "conda or container integration instead."

      - name: "subworkflow"
        type: "top-level"
        advice: "use the module directive instead."

  # ---------------------------------------
  - version: "7.25.0"

    introduced:
      - name: "localrule"
        type: "rule-like"

  # ----------------------
  - version: "7.7.0"

    introduced:
      - name: "retries"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "7.0.0"

    introduced:
      - name: "template_engine"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "6.15.0"

    introduced:
      - name: "default_target"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "6.2.0"

    introduced:
      - name: "handover"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "6.0.0"

    introduced:
      - name: "use"
        type: "top-level"

      - name: "module"
        type: "top-level"

      - name: "meta_wrapper"
        type: "module"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "skip_validation"
        type: "module"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "config"
        type: "module"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "snakefile"
        type: "module"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "containerized"
        type: "top-level"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "containerized"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

    deprecated:
      - name: "subworkflow"
        type: "top-level"
        advice: "use the module directive instead."

  # ----------------------
  - version: "5.31.0"

    introduced:
      - name: "name"
        type: "rule-like"
        keyword_args_allowed: False

  # ----------------------
  - version: "5.12.0"

    introduced:
      - name: "cache"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "5.11.0"

    deprecated:
      - name: "singularity"
        type: "top-level"
        advice: "use container directive instead."

      - name: "singularity"
        type: "rule-like"
        advice: "use container directive instead."

    introduced:
      - name: "envvars"
        type: "top-level"

      - name: "container"
        type: "top-level"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "container"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "5.9.0"

    introduced:
      - name: "envmodules"
        type: "rule-like"
        keyword_args_allowed: False

  # ----------------------
  - version: "5.4.0"

    deprecated:
      - name: "dynamic"
        type: "function"
        advice: "use checkpoints instead."

  # ----------------------
  - version: "4.8.0"

    introduced:
      - name: "cwl"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "conda"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False
        lambda_args:
          - "wildcards"
          - "params"
          - "input"

      - name: "singularity"
        type: "rule-like"
        keyword_args_allowed: False
        multiple_args_allowed: False

      - name: "singularity"
        type: "top-level"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "3.8.0"
    introduced:
      - name: "wildcard_constraints"
        type: "rule-like"

      - name: "wildcard_constraints"
        type: "top-level"

      - name: "configfile"
        type: "subworkflow"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "3.5.5"

    introduced:
      - name: "wrapper"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  - version: "3.5.2"

    introduced:
      - name: "script"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "notebook"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

  # ----------------------
  # Not sure when these sections were introduced, let's use `1.0` version
  - version: "1.0.0"

    introduced:
      - name: "shadow"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "group"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "priority"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "threads"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "message"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "version"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "benchmark"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "shell"
        type: "rule-like"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "workdir"
        type: "top-level"
        multiple_args_allowed: False

      - name: "workdir"
        type: "subworkflow"
        multiple_args_allowed: False
        keyword_args_allowed: False

      - name: "snakefile"
        type: "subworkflow"
        multiple_args_allowed: False
        keyword_args_allowed: False
