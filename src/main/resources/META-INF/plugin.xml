<idea-plugin>
    <id>SnakeCharm</id>
    <name>SnakeCharm</name>
    <vendor email="roman.chernyatchik@jetbrains.com"
            url="https://research.jetbrains.org/groups/biolabs">
        JetBrains Research
    </vendor>

    <description><![CDATA[
    Adds Snakemake language support.<br>
    <a href="https://snakemake.readthedocs.io/en/stable/">Snakemake</a> is a language for workflow management.
    <br>
    <br>
    <a href="https://github.com/JetBrains-Research/snakecharm">SnakeCharm at GitHub</a><br>
    <a href="https://github.com/JetBrains-Research/snakecharm/issues">Issue tracker</a><br>
    <a href="https://github.com/JetBrains-Research/snakecharm/releases">Releases</a><br>
    <a href="https://github.com/JetBrains-Research/snakecharm/blob/master/CHANGES">Changelog</a><br>
    ]]></description>

  <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
       on how to target different products -->

  <!-- PyCharm / Python plugin dependency -->
  <depends>com.intellij.modules.lang</depends>
  <depends optional="true">com.intellij.modules.python</depends>

  <extensions defaultExtensionNs="com.intellij">
    <fileTypeFactory implementation="com.jetbrains.snakecharm.SmkFileTypeFactory"/>
    <lang.parserDefinition
            language="Snakemake"
            implementationClass="com.jetbrains.snakecharm.lang.parser.SmkParserDefinition"
    />
    <fileTypeFactory implementation="com.jetbrains.snakecharm.stringLanguage.SmkSLFileTypeFactory"/>
    <lang.parserDefinition
            language="SnakemakeSL"
            implementationClass="com.jetbrains.snakecharm.stringLanguage.lang.parser.SmkSLParserDefinition"
    />
    <!--<colorSettingsPage implementation="com.jetbrains.snakemake.lang.highlighter.SnakemakeColorsPage"/>-->
    <lang.syntaxHighlighterFactory language="Snakemake" implementationClass="com.jetbrains.snakecharm.lang.highlighter.SnakemakeSyntaxHighlighterFactory"/>
    <lang.syntaxHighlighterFactory language="SnakemakeSL"
     implementationClass="com.jetbrains.snakecharm.stringLanguage.lang.highlighter.SmkSLSyntaxHighlighterFactory"/>
    <annotator language="Python" implementationClass="com.jetbrains.snakecharm.lang.SmkDumbAwareAnnotatorManager"/>
    <annotator language="Python" implementationClass="com.jetbrains.snakecharm.lang.SmkStandardAnnotatorManager"/>
    <annotator language="RegExp" implementationClass="com.jetbrains.snakecharm.stringLanguage.lang.highlighter.SmkSLRegExpHighlightingAnnotator"/>
    <annotator language="Python" implementationClass="com.jetbrains.snakecharm.stringLanguage.lang.highlighter.SmkSLAnnotatingVisitor"/>
    <lang.foldingBuilder language="Snakemake" implementationClass="com.jetbrains.snakecharm.lang.SmkMakeFoldingBuilder"/>
    <lang.braceMatcher language="SnakemakeSL" implementationClass="com.jetbrains.snakecharm.stringLanguage.lang.SmkSLBraceMatcher"/>
    <renamePsiElementProcessor implementation="com.jetbrains.snakecharm.stringLanguage.codeInsight.SmkSLRenameWildcardsProcessor"/>
    <!--<enterBetweenBracesDelegate language="Snakemake" implementationClass="com.jetbrains.snakecharm.codeInsight.editorActions.EnterInRuleParamsListDelegate"/>-->
    <codeInsight.lineMarkerProvider language="Snakemake" implementationClass="com.jetbrains.snakecharm.SnakemakeMethodLineMarkerProvider"/>
    <lang.documentationProvider language="Snakemake" implementationClass="com.jetbrains.snakecharm.lang.documentation.SmkShadowSettingsDocumentation"/>
    <lang.psiStructureViewFactory language="Snakemake" implementationClass="com.jetbrains.snakecharm.lang.structureView.SmkStructureViewFactory"/>
    <stubElementTypeHolder class="com.jetbrains.snakecharm.lang.psi.elementTypes.SmkStubElementTypes"/>
    <stubIndex implementation="com.jetbrains.snakecharm.lang.psi.stubs.SmkRuleNameIndex"/>
    <stubIndex implementation="com.jetbrains.snakecharm.lang.psi.stubs.SmkCheckpointNameIndex"/>
    <gotoSymbolContributor implementation="com.jetbrains.snakecharm.actions.SmkGotoSymbolContributor"/>

    <multiHostInjector implementation="com.jetbrains.snakecharm.stringLanguage.lang.SmkSLInjector"/>
<!--    <metaDataContributor implementation="com.jetbrains.snakecharm.lang.psi.SmkMetaDataContributor"/>-->
<!--    <referencesSearch implementation="com.jetbrains.snakecharm.codeInsight.refactoring.SmkReferencesSearcher"/>-->

    <completion.contributor
        language="Python"
        implementationClass="com.jetbrains.snakecharm.codeInsight.completion.SMKImplicitPySymbolsCompletionContributor"
    />
    <completion.contributor
        language="Python"
        implementationClass="com.jetbrains.snakecharm.codeInsight.completion.SmkKeywordCompletionContributor"
    />
    <completion.contributor
            language="Python"
            implementationClass="com.jetbrains.snakecharm.codeInsight.completion.SMKShadowSettingsCompletionContributor"
    />
    <completion.contributor
            language="Python"
            implementationClass="com.jetbrains.snakecharm.codeInsight.completion.SmkLambdaParameterInSectionCompletionContributor"
    />
    <completion.contributor
            language="Python"
            implementationClass="com.jetbrains.snakecharm.codeInsight.completion.SmkRulesAndCheckpointsCompletionContributor"
            order="first"
            id="SmkRulesAndCheckpointsCompletionContributor"
    />
    <completion.contributor
            language="Python"
            implementationClass="com.jetbrains.snakecharm.codeInsight.completion.SmkDictionaryTypesCompletionContributor"
            id="SmkDictionaryTypesCompletionContributor"
    />

    <psi.referenceContributor implementation="com.jetbrains.snakecharm.lang.psi.references.SmkPySubscriptionReferenceContributor"/>
    <localInspection
        language="Snakemake"
        shortName="SmkResourcesKeywordArgsInspection"
        enabledByDefault="true"
        level="ERROR"
        suppressId="SmkResourcesKeywordArgsInspection"
        bundle="SnakemakeBundle"
        groupKey="INSP.GROUP.snakemake"
        key="INSP.NAME.resources.unnamed.args"
        implementationClass="com.jetbrains.snakecharm.inspections.SmkResourcesKeywordArgsInspection"
    />

    <localInspection
        language="Snakemake" shortName="SmkRuleRedeclarationInspection"
        enabledByDefault="true"
        level="ERROR"
        suppressId="SmkRuleRedeclaration"
        bundle="SnakemakeBundle"
        groupKey="INSP.GROUP.snakemake"
        key="INSP.NAME.rule.redeclaration"
        implementationClass="com.jetbrains.snakecharm.inspections.SmkRuleRedeclarationInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkRuleSectionAfterExecutionInspection"
            enabledByDefault="true"
            level="ERROR"
            suppressId="SmkRuleSectionAfterExecution"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.rule.section.after.execution"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkRuleSectionAfterExecutionInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkNotSameWildcardsSetInspection"
            enabledByDefault="true"
            level="ERROR"
            suppressId="SmkNotSameWildcardsSetInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.not.same.wildcards.set.title"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkNotSameWildcardsSetInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkShadowSettingsInspection"
            enabledByDefault="true"
            level="WARNING"
            suppressId="SmkShadowSettingsInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.shadow.settings"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkShadowSettingsInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkSectionRedeclarationInspection"
            enabledByDefault="true"
            level="WEAK WARNING"
            suppressId="SmkSectionRedeclarationInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.section.redeclaration"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkSectionRedeclarationInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkSectionMultipleArgsInspection"
            enabledByDefault="true"
            level="ERROR"
            suppressId="SmkSectionMultipleArgsInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.section.multiple.args"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkSectionMultipleArgsInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkSubworkflowRedeclarationInspection"
            enabledByDefault="true"
            level="WEAK WARNING"
            suppressId="SmkSubworkflowRedeclarationInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.subworkflow.redeclaration"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkSubworkflowRedeclarationInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkRuleOrCheckpointNameYetUndefinedInspection"
            enabledByDefault="true"
            level="ERROR"
            suppressId="SmkRuleOrCheckpointNameYetUndefinedInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.rule.or.checkpoint.name.yet.undefined"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkRuleOrCheckpointNameYetUndefinedInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkLocalrulesRuleorderRepeatedRuleInspection"
            enabledByDefault="true"
            level="WARNING"
            suppressId="SmkLocalrulesRuleorderRepeatedRuleInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.localrules.ruleorder.repeated.rule"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkLocalrulesRuleorderRepeatedRuleInspection"
    />

    <localInspection
            language="Snakemake" shortName="SmkLambdaRuleParamsInspection"
            enabledByDefault="true"
            level="ERROR"
            suppressId="SmkLambdaRuleParamsInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.only.specific.lambda.params"
            implementationClass="com.jetbrains.snakecharm.inspections.SmkLambdaRuleParamsInspection"
    />

    <localInspection
            language="SnakemakeSL" shortName="SmkWildcardNotDefinedInspection"
            enabledByDefault="true"
            level="ERROR"
            suppressId="SmkWildcardNotDefinedInspection"
            bundle="SnakemakeBundle"
            groupKey="INSP.GROUP.snakemake"
            key="INSP.NAME.wildcard.not.defined.title"
            implementationClass="com.jetbrains.snakecharm.inspections.smksl.SmkWildcardNotDefinedInspection"
    />

    <findUsagesHandlerFactory
            implementation="com.jetbrains.snakecharm.codeInsight.refactoring.SmkFindUsagesHandlerFactory"
            id="Python" order="last, before default"
    />
  </extensions>

  <module-components>
    <component>
      <implementation-class>com.jetbrains.snakecharm.codeInsight.ImplicitPySymbolsProvider</implementation-class>
    </component>
  </module-components>


  <extensions defaultExtensionNs="Pythonid">
    <dialectsTokenSetContributor implementation="com.jetbrains.snakecharm.lang.SmkTokenSetContributor"/>
    <pyReferenceResolveProvider
        implementation="com.jetbrains.snakecharm.codeInsight.resolve.SMKImplicitPySymbolsResolveProvider"
    />
    <typeProvider implementation="com.jetbrains.snakecharm.codeInsight.SmkTypeProvider"/>
    <visitorFilter
            language="Snakemake"
            implementationClass="com.jetbrains.snakecharm.lang.highlighter.SnakemakeVisitorFilter"
    />
    <inspectionExtension
            implementation="com.jetbrains.snakecharm.inspections.SmkIgnorePyInspectionExtension"/>
  </extensions>
</idea-plugin>